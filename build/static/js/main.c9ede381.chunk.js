(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,n){e.exports=n(44)},42:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(10),s=n.n(r),l=n(15),u=n(11),i=n(12),c=n(14),m=n(13),f=n(16),d=n(2),h=n.n(d),p="/api/persons",g={getAll:function(){return h.a.get(p).then(function(e){return e.data})},create:function(e){return h.a.post(p,e).then(function(e){return e.data})},deletePerson:function(e){h.a.delete("".concat(p,"/").concat(e))},update:function(e,t){return h.a.put("".concat(p,"/").concat(e),t).then(function(e){return e.data})}},b=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(c.a)(this,Object(m.a)(t).call(this,e))).addPerson=function(e){e.preventDefault();var t,a=[];for(t=0;t<n.state.persons.length;t++)a.push(n.state.persons[t].name);if(a.includes(n.state.newName)){if(a.includes(n.state.newName)&&window.confirm("".concat(n.state.newName," on jo luettelossa, korvataanko vanha numero uudella?"))){var o=n.state.persons.find(function(e){return e.name===n.state.newName}),r=Object(l.a)({},o,{number:n.state.newNumber});g.update(r.id,r).then(function(e){n.setState({persons:n.state.persons.map(function(t){return t.id!==r.id?t:e}),newName:"",newNumber:"",notif:"muutettiin henkil\xf6n ".concat(r.name," numero")}),setTimeout(function(){n.setState({notif:null})},5e3)}).catch(function(e){n.setState({persons:n.state.persons.filter(function(e){return e.id!==r.id}),newName:"",newNumber:"",notif:"henkil\xf6n ".concat(r.name," tiedot on jo poistettu. lis\xe4\xe4 henkil\xf6 uudelleen")}),setTimeout(function(){n.setState({notif:null})},5e3)})}}else{var s={name:n.state.newName,id:n.state.persons.length+1,number:n.state.newNumber};g.create(s).then(function(e){n.setState({persons:n.state.persons.concat(e),newName:"",newNumber:"",notif:"lis\xe4ttiin ".concat(e.name)}),setTimeout(function(){n.setState({notif:null})},5e3)})}},n.handlePersonChange=function(e){n.setState({newName:e.target.value})},n.handleNumberChange=function(e){n.setState({newNumber:e.target.value})},n.handleFilter=function(e){n.setState({filter:e.target.value.toLowerCase()})},n.deletePerson=function(e){return function(){var t=n.state.persons.find(function(t){return t.id===e});if(window.confirm("poistetaanko ".concat(t.name,"?"))){console.log("deleting"),g.deletePerson(e),console.log(n.state.persons);var a=n.state.persons.filter(function(t){return t.id!==e});console.log(a),n.setState({persons:a,notif:"poistettiin ".concat(t.name)}),setTimeout(function(){n.setState({notif:null})},5e3)}}},n.state={persons:[],newName:"",newNumber:"",filter:"",notif:null},console.log("constructor"),n}return Object(f.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log("did mount"),g.getAll().then(function(t){console.log("promise fulfilled"),e.setState({persons:t})})}},{key:"render",value:function(){var e=this;console.log("render");var t=""===this.state.filter?this.state.persons:this.state.persons.filter(function(t){return t.name.toLowerCase().includes(e.state.filter)});return o.a.createElement("div",null,o.a.createElement("h1",null,"Puhelinluettelo"),o.a.createElement(w,{message:this.state.notif}),o.a.createElement("div",null,"rajaa n\xe4ytett\xe4vi\xe4 ",o.a.createElement("input",{value:this.state.rajaus,onChange:this.handleFilter})),o.a.createElement("h2",null,"Lis\xe4\xe4 uusi / muuta olemassaolevan numeroa"),o.a.createElement(v,{handleChange:this.addPerson,nameValue:this.state.newName,nameChange:this.handlePersonChange,numberValue:this.state.newNumber,numberChange:this.handleNumberChange}),o.a.createElement("h2",null,"Numerot"),o.a.createElement(E,{persons:t,deletePerson:this.deletePerson}))}}]),t}(o.a.Component),w=function(e){var t=e.message;return null===t?null:o.a.createElement("div",{className:"message"},t)},v=function(e){return o.a.createElement("form",{onSubmit:e.handleChange},o.a.createElement("div",null,"nimi: ",o.a.createElement("input",{value:e.nameValue,onChange:e.nameChange})),o.a.createElement("div",null,"numero: ",o.a.createElement("input",{value:e.numberValue,onChange:e.numberChange})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"lis\xe4\xe4")))},E=function(e){return o.a.createElement("table",null,o.a.createElement("tbody",null,e.persons.map(function(t){return o.a.createElement("tr",{key:t.id},o.a.createElement("td",null,t.name),o.a.createElement("td",null,t.number),o.a.createElement("td",null,o.a.createElement("button",{onClick:e.deletePerson(t.id)},"poista")))})))},N=b;n(42);s.a.render(o.a.createElement(N,null),document.getElementById("root"))}},[[17,2,1]]]);
//# sourceMappingURL=main.c9ede381.chunk.js.map