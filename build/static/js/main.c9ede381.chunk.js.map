{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","persons","getAll","axios","get","then","response","data","create","newObject","post","deletePerson","id","delete","concat","update","modifiedObjet","put","App","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","addPerson","event","preventDefault","i","names","state","length","push","name","includes","newName","window","confirm","person","find","p","modifiedPerson","objectSpread","number","newNumber","personService","setState","map","notif","setTimeout","catch","error","filter","personObject","newPerson","handlePersonChange","target","value","handleNumberChange","handleFilter","toLowerCase","deleteName","console","log","newPersons","_this2","_this3","namesToShow","react_default","a","createElement","App_NewNotification","message","rajaus","onChange","App_AddPerson","handleChange","nameValue","nameChange","numberValue","numberChange","App_Persons","React","Component","NewNotification","_ref","className","AddPerson","onSubmit","type","Persons","key","onClick","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.c9ede381.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}\n\nconst create = (newObject) => {\n    const request = axios.post(baseUrl, newObject)\n    return request.then(response => response.data)\n}\n\nconst deletePerson = (id) => {\n    axios.delete(`${baseUrl}/${id}`)\n}\n\nconst update = (id, modifiedObjet) => {\n    const request = axios.put(`${baseUrl}/${id}`, modifiedObjet)\n    return request.then(response => response.data)\n}\n\nexport default { getAll, create, deletePerson, update }","import React from 'react';\nimport personService from './services/persons'\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      persons: [],\n      newName: '',\n      newNumber: '',\n      filter: '',\n      notif: null\n    }\n    console.log('constructor')\n  }\n\n  componentDidMount() {\n      console.log('did mount')\n      personService\n        .getAll()\n        .then(response => {\n            console.log('promise fulfilled')\n            this.setState({persons: response})\n        })\n  }\n\n  addPerson = (event) => {\n      event.preventDefault()\n\n      var names = []\n\n      var i\n      for(i=0; i < this.state.persons.length; i++) {\n        names.push(this.state.persons[i].name);\n      };\n\n      if (!(names.includes(this.state.newName))) {\n        const personObject = {\n            name: this.state.newName,\n            id: this.state.persons.length + 1,\n            number: this.state.newNumber\n        }\n        personService\n            .create(personObject)\n            .then(newPerson => {\n                this.setState({\n                    persons: this.state.persons.concat(newPerson),\n                    newName:'',\n                    newNumber: '',\n                    notif: `lisättiin ${newPerson.name}`\n                })\n                setTimeout(() => {\n                    this.setState({ notif: null })\n                  }, 5000)\n            })\n      } else if (names.includes(this.state.newName)) {\n        if (window.confirm(`${this.state.newName} on jo luettelossa, korvataanko vanha numero uudella?`)) {\n            const person = this.state.persons.find(p => p.name === this.state.newName)\n            const modifiedPerson = {...person, number: this.state.newNumber}\n\n            personService\n                .update(modifiedPerson.id, modifiedPerson)\n                .then(response => {\n                    this.setState({\n                        persons: this.state.persons.map(person => person.id !== modifiedPerson.id ? person : response),\n                        newName: '',\n                        newNumber: '',\n                        notif: `muutettiin henkilön ${modifiedPerson.name} numero`\n                })\n                setTimeout(() => {\n                    this.setState({ notif: null })\n                  }, 5000)\n            })\n                .catch(error => {\n\n                    this.setState({\n                        persons: this.state.persons.filter(person => person.id !== modifiedPerson.id),\n                        newName: '',\n                        newNumber: '',\n                        notif: `henkilön ${modifiedPerson.name} tiedot on jo poistettu. lisää henkilö uudelleen`\n                    })\n                    setTimeout(() => {\n                        this.setState({ notif: null })\n                      }, 5000)\n                    \n              })\n        }\n      }\n    }\n\n    handlePersonChange = (event) => {\n        this.setState({newName: event.target.value})\n    }\n    handleNumberChange = (event) => {\n        this.setState({newNumber: event.target.value})\n    }\n    handleFilter = (event) => {\n        this.setState({filter: event.target.value.toLowerCase()})\n    }\n    \n    deletePerson = (id) => {\n        return () => {\n            const deleteName = this.state.persons.find(p => p.id === id)\n            if (window.confirm(`poistetaanko ${deleteName.name}?`)) {\n                console.log('deleting')\n                personService\n                    .deletePerson(id)\n                \n                console.log(this.state.persons)\n                const newPersons = this.state.persons.filter(p => p.id !== id)\n                console.log(newPersons)\n                this.setState({\n                    persons: newPersons,\n                    notif: `poistettiin ${deleteName.name}`\n                })\n                setTimeout(() => {\n                    this.setState({ notif: null })\n                  }, 5000)\n            }\n\n        }     \n    }\n\n  render() {\n      console.log('render')\n    const namesToShow =\n    this.state.filter === ''?\n      this.state.persons :\n      this.state.persons.filter(person => person.name.toLowerCase().includes(this.state.filter))\n\n    return (\n      <div>\n        <h1>Puhelinluettelo</h1>\n        <NewNotification message={this.state.notif}/>\n        <div>\n            rajaa näytettäviä <input value={this.state.rajaus} onChange={this.handleFilter}/>\n        </div>\n        <h2>Lisää uusi / muuta olemassaolevan numeroa</h2>\n        <AddPerson handleChange={this.addPerson} nameValue={this.state.newName}\n        nameChange={this.handlePersonChange} numberValue={this.state.newNumber}\n        numberChange={this.handleNumberChange}/>\n        <h2>Numerot</h2>\n            <Persons persons={namesToShow} deletePerson={this.deletePerson}/>\n      </div>\n    )\n  }\n}\n\nconst NewNotification = ({message}) => {\n    if (message === null) {\n        return null\n      }\n    \n    return (\n        <div className=\"message\">\n        {message}\n        </div>\n\n    )\n}\n\nconst AddPerson = (props) => {\n  return (\n      <form onSubmit={props.handleChange}>\n      <div>\n          nimi: <input value={props.nameValue} onChange={props.nameChange}/>\n      </div>\n      <div>\n          numero: <input value={props.numberValue} onChange={props.numberChange}/>\n      </div>\n      <div>\n          <button type=\"submit\">lisää</button>\n      </div>\n      </form>\n    )\n}\n\nconst Persons = (props) => {\n    return (\n        <table>\n            <tbody>\n                {props.persons.map(person => <tr key={person.id}><td>{person.name}</td>\n                <td>{person.number}</td><td><button onClick={props.deletePerson(person.id)}>poista</button></td></tr>)}\n            </tbody>\n        </table>\n    )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(\n    <App />,\n    document.getElementById('root')\n  )\n"],"sourceRoot":""}